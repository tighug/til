# Linux

- [Linux 標準教科書](https://linuc.org/textbooks/linux/)
- [Linux の基本の基本。Linux の基本的なディレクトリ構成 \| OXY NOTES](https://oxynotes.com/?p=5987)
- [Windows フォルダとの違いを覚えよう！ \| キツネの惑星](https://kitsune.blog/linux-directory)

## TOC

- [Linux](#linux)
  - [TOC](#toc)
  - [Command](#command)
    - [基本的なコマンド](#基本的なコマンド)
    - [正規表現とパイプ](#正規表現とパイプ)
    - [基本的なコマンド 2](#基本的なコマンド-2)
    - [vi エディタ](#vi-エディタ)
    - [管理者の仕事](#管理者の仕事)
      - [ユーザー](#ユーザー)
      - [グループ](#グループ)
      - [パスワード](#パスワード)
  - [ユーザ権限とアクセス権](#ユーザ権限とアクセス権)
  - [シェルスクリプト](#シェルスクリプト)
  - [ネットワークの設定と管理](#ネットワークの設定と管理)
    - [通信の確認](#通信の確認)
    - [通信経路の確認](#通信経路の確認)
    - [IP アドレスの確認](#ip-アドレスの確認)
    - [ルーティング](#ルーティング)
  - [プロセス管理](#プロセス管理)
  - [ファイル管理](#ファイル管理)
  - [Directory](#directory)
    - [/](#)
    - [/usr](#usr)
    - [/var](#var)

## Command

### 基本的なコマンド

- **ファイル・ディレクトリの参照**：`ls [オプション] [ファイル]`
  - `-a` 隠しファイルもすべて表示
  - `-l` Long 形式で表示
  - `-t` 更新時間順にソートして表示
  - `-r` 逆順にソートして表示
- **ファイルのコピー**：`cp [オプション] コピー元 コピー先`
  - `-i` 処理を実行していいか確認する
  - `-r` ディレクトリをコピー
  - `-p` 元ファイルの情報を保ったままコピー
- **ファイルの移動**：`mv 移動元ファイル 移動先ファイル`
  - `-i` 処理を実行していいか確認する
  - `-f` 強制的に処理を実行する
- **ファイルの削除**：`rm ファイル名`
  - `-i` 処理を実行していいか確認する
  - `-r` ディレクトリを削除
  - `-f` 強制的に処理を実行する
- **現在のディレクトリの表示**：`pwd`
- **ディレクトリの変更**：`cd [ディレクトリ名]`
- **ディレクトリの作成**：`mkdir ディレクトリ名`
  - `-p` 上位層も一緒に作成
- **ディレクトリの削除**：`rmdir ディレクトリ名`
  - `-p` 上位層も一緒に削除
  - ディレクトリ内が空の時だけ削除できる。
- **ファイル内容表示**：`cat ファイル名`
  - `-n` 行番号を付加
- **ファイル内容表示**：`more ファイル名`
- **ファイル内容表示**：`less ファイル名`
- **ファイルの検索**：`find パス -name ファイル名`
- **コマンドのパスを表示**：`which コマンド名`
- **ヘルプ**：`コマンド --help`
- **マニュアル**：`man コマンド名`
  - `-k 単語` 単語が含まれるエントリ一覧を表示

### 正規表現とパイプ

- **リダイレクト**

  ```bash
  ls > ls-output // lsの標準出力が書き込まれたls-outputが作成
  cat > cat-ouput // 標準出力を実行時点で記述できる
  ```

  - `>`は上書き。`>>`は追記。

- **データを検索する**：`grep [オプション] 検索条件 [指定ファイル]`
  - `-e` 文字列を検索パターンとして扱う。
  - `-i` 大文字と小文字の区別を行わない。
  - `-v` 検索パターンとマッチしなかった行を選択。

### 基本的なコマンド 2

- **ファイルのタイムスタンプの変更**：`touch [オプション] ファイル名`

  - ファイルが存在しない場合、空のファイルを作成。
  - `-t` ファイルの更新時刻を指定（[[CC]YY]MMDDhhmm[.SS]）

- **ファイルの一部の取得**

  ```bash
  head [オプション] ファイル名 // 先頭
  tail [オプション] ファイル名 // 末尾
  ```

  - `-n 列` 先頭/末尾から指定した行を標準出力
  - `-c バイト` 先頭/末尾から指定したバイトを標準出力
  - `-f` リアルタイムに更新

- **テキストファイルのソート**：`sort [オプション] ファイル名`

  - `-r` 逆順でソート
  - `-k n` n 列目のデータをソート
  - `-n` 数値としてソート

- **行の重複の消去**：`uniq ファイル名`

  - 直前の行と重複があった場合、対象行を出力しない。

- **文字列の置き換え**：`tr 文字列1 文字列2`

- **ファイルの比較**：`diff [オプション] ファイル1 ファイル2`

  - `-c` context diff 形式で差分を出力
  - `-u` unified diff 形式で差分を出力

### vi エディタ

### 管理者の仕事

#### ユーザー

ユーザの定義は`etc/passwd`ファイルに記述される。

- **ユーザーの作成**：`useradd ユーザー名`

  - `-c コメント`
  - `-g グループ名`
  - `-G グループ名`
  - `-d ディレクトリ`
  - `-s シェル`
  - `-u ユーザーID`

- **ユーザーアカウントの変更**：`usermod ユーザー名`

  - `-c コメント`
  - `-g グループ名`
  - `-G グループ名`
  - `-l ユーザー名`
  - `-u ユーザーID`

- **ユーザーアカウントの削除**：`userdel ユーザー名`
  - `-r` ホームディレクトリも削除

#### グループ

- **グループの作成**：`groupadd [グループ名]`

  - `-g グループID`

- **グループの登録情報の変更**：`groupmod [-g gid] [-n new-group-name] 変更対象のグループ`

  - `-n` 既存のグループ名を変更
  - `-g` 既存のグループ ID を変更

- **グループの削除**：`groupdel グループ名`

#### パスワード

## ユーザ権限とアクセス権

## シェルスクリプト

## ネットワークの設定と管理

### 通信の確認

```bash
ping ターゲット
```

### 通信経路の確認

```bash
traceroute ターゲット
tracepath ターゲット
```

### IP アドレスの確認

```bash
ip a [インターフェース]
nmcli [インターフェース]
nmtui
```

### ルーティング

```bash
ip route [オプション]
ss [オプション]
```

- `-V` バージョン情報
- `-a` すべてのソケットを表示
- `-n` サービス名に変換せず表示
- `-r` ホスト名を名前解決
- `-p` ソケットを使用しているプロセス ID を表示
- `-s` 集約したソケット情報
- `-4` IPv4 のソケットのみ表示。他のオプションと併用
- `-6` IPv6 のソケットのみ表示。他のオプションと併用
- `-t` TCP のソケットのみ表示
- `-u` UDP のソケットのみ表示
- `-e` 詳細なソケット情報を表示

## プロセス管理

## ファイル管理

## Directory

### /

| directory | description                                                          |
| --------- | -------------------------------------------------------------------- |
| bin       | 基本コマンド（cp、chmode 等）                                        |
| boot      | 起動（ブート）に必要なファイル                                       |
| dev       | デバイスファイル                                                     |
| etc       | 設定ファイル                                                         |
| home      | ユーザーのホームディレクトリ                                         |
| lib       | 共有ライブラリ。`/bin`や`/sbin`のコマンド実行に必要なファイル。      |
| lib64     | 共有ライブラリ（64bit 版）                                           |
| media     | リムーバルメディアのマウントポイント（CD 等）                        |
| mnt       | マウントポイント                                                     |
| opt       | 追加アプリケーション                                                 |
| proc      | プロセス情報                                                         |
| root      | root のホームディレクトリ                                            |
| run       |                                                                      |
| sbin      | システム管理用コマンド（shutdown、reboot 等）                        |
| srv       | FTP、WWW 等で利用するユーザー用のスペース                            |
| sys       | ドライバー関連のプロセス                                             |
| tmp       | 一時ファイル。再起動時に消去される                                   |
| usr       | 各ユーザーが共通して利用するプログラム                               |
| var       | ログやキャッシュなどの可変的システムデータ。再起動しても消去されない |

### /usr

| directory                                | description                                          |
| ---------------------------------------- | ---------------------------------------------------- |
| bin                                      | usr 版のコマンド（openssh、perl 等）                 |
| games                                    | ゲーム用ディレクトリ                                 |
| include                                  | C 言語用ヘッダーファイルの保存場所                   |
| lib                                      | usr 版のライブラリ保存場所                           |
| local システム管理者用のローカルファイル |
| sbin                                     | usr 版管理者用コマンド                               |
| share                                    | アーキテクチャに依存しないデータ（man、DB データ等） |
| src                                      | ソースコードの保存場所                               |

### /var
