# 6. データベース技術

## データベース

- スキーマ
  - 外部スキーマ : アプリケーションからみた DB の構造（ビュー）
  - 概念スキーマ : 開発者からみた DB の構造（表）
  - 内部スキーマ : DB の構造定義

## データベース設計

- 主キー
- 外部キー

## データの正規化

正規化の目的は、データの重複や矛盾を排除すること

- 第 1 正規化 : 繰返し項目を別の表にする
- 第 2 正規化 : 主キーの一部によって決定される項目を別の表にする
- 第 3 正規化
  - 主キー以外によって決定される項目を別の表にする
  - 計算で求まる項目を排除

## トランザクション処理

- ACID 特性
  - 原子性（Atomicity）: TX 処理がすべて完了したか、まったく完了していないか
  - 一貫性（Consistency）: 内容に矛盾がない
  - 独立性（Isolation）: 複数の TX を同時に実行した場合と、順番に実行した場合の結果が同じ
  - 耐久性（Durability）: 結果は障害が発生しても DB から消失しない
- 排他制御
  - 共有ロック
    - データ参照前にかけるロック
    - 他の TX から参照できるが更新できない
  - 専有ロック
    - データ更新前にかけるロック
    - 他の TX から参照も更新もできない
- デッドロック : お互いのロック解放待ち
- 2 層コミットメント
  - 更新確定前に中間状態で待機
  - コミットするかロールバックするかのどちらか

## データベースの障害回復

- ロールフォワード : フルバックアップファイルとログファイルの更新後情報で復旧
- ロールバック : ログファイルの更新前情報で復旧

## データ操作と SQL

- 射影 : 特定の列を抽出
- 選択 : 特定の行を抽出
- 結合 : 複数の表を結合

## SQL（並べ替え・グループ化）

## SQL（副問合せ）

## データベースの応用

- NoSQL
  - キーバリュー型
  - カラム指向型
  - ドキュメント指向型
- DB の応用
  - データウェアハウス : 企業活動を通して得られた大量のデータを持つ DB
  - データマート : データウェアハウスから抽出した目的別の DB
  - データマイニング : 大量のデータを分析し法則性を見出す
  - BI ツール : 上記 3 つを用いて経営判断上の有用な情報を取り出すツール
