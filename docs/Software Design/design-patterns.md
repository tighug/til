# Design Patterns

デザインパターンとは、**「特定の問題に取り組む方法のガイドライン」のことで、よくあるプログラム設計パターンをまとめたもの**です。

- [Design Patterns For Humans（翻訳版）](https://techracho.bpsinc.jp/hachi8833/2017_10_02/46064)

## TOC

1. [Creational](#Creational)
2. [Structual](#Structual)
3. [Behavioral](#Behavioral)

## Creational

オブジェクトのインスタンス化や、関連するオブジェクトのグループ化を行うもの。

| Pattern          | Complexity | Popularity |
| ---------------- | ---------- | ---------- |
| Factory Method   | ★          | ★★★        |
| Abstract Factory | ★★         | ★★★        |
| Builder          | ★★         | ★★★        |
| Prototype        | ★          | ★★         |
| Singleton        | ★          | ★★         |

### Factory Method

### Abstract Factory

### Builder

- 使い道
  - Simple Factory でのオブジェクト作成時に、コンストラクタに多くの引数を渡すような場合。（e.g. ハンバーガーのトッピング）
- 説明
  - オブジェクト作成時のフレーバー（トッピング）を、メソッドで後から付け加える。

### Prototype

- 使い道
  - かかるコストが「新オブジェクト作成」>「既存のオブジェクトのクローン生成」の場合。
- 説明
  - 既存のコピーを作成する。

### Singleton

- 使い道
  - 1 つしか存在しないオブジェクトを作成する場合。マネージャークラスとか。時にアンチパターンであるので使いすぎに注意。
- 説明
  - あるクラスのオブジェクトが 1 つだけであることを保証する。

## Structual

オブジェクトの構造（composition）に関わるもの。エンティティ同士がどのように関わり合うか。

| Pattern   | Complexity | Popularity |
| --------- | ---------- | ---------- |
| Adapter   | ★          | ★★★        |
| Bridge    | ★★★        | ★          |
| Composite | ★★         | ★★         |
| Decorator | ★★         | ★★         |
| Facade    | ★          | ★★         |
| Flyweight | ★★★        |            |
| Proxy     | ★★         | ★          |

### Adapter

- 使い道
  - 互換性のないオブジェクトを、互換性のあるものに変換したい場合。
- 説明
  - 既存のクラスのインターフェイスを別のインターフェイスとして利用できるようにする。ラッパー。

### Bridge

- 使い道
  - 複数のオブジェクト共通の設定を使いたい時。（言語、色テーマとか）
- 説明
  - 継承ではなく構成（composition）を優先する。コンストラクタで設定を読み込む。

### Composite

- 使い道
  - ツリーのオブジェクト構造を実装する必要がある場合。
- 説明
  - **共通のインタフェース**を持つ「**単純**なリーフ」と「**複雑**なコンテナ」がある。

### Decorator

- 使い道
  - 動的に振る舞いを追加したい場合。（e.g. コーヒーのミルク、砂糖、ホイップ）
- 説明

### Facade

- 使い道
  - 複雑なコードに、シンプルなインターフェースを用意したい場合。
- 説明
  - private な小さな機能を、public なメソッドでまとめる。

### Flyweight

- 使い道
  - メモリ使用量や計算コストを小さくしたい場合。
- 説明
  - 同じようなオブジェクトをできるだけ共有する。

### Proxy

## Behavioral

オブジェクト間での責務の割り当て方。単に構造を指定するのではなく、メッセージの受け渡し方の大枠を定める。

| Pattern         | Complexity | Popularity |
| --------------- | ---------- | ---------- |
| CoR             | ★★         | ★          |
| Command         | ★          | ★★         |
| Iterator        | ★★         | ★★★        |
| Mediator        | ★★         |            |
| Memento         | ★★         | ★          |
| Observer        | ★★         | ★★★        |
| State           | ★          | ★★         |
| Strategy        | ★          | ★★★        |
| Template Method | ★          | ★★         |
| Visitor         | ★★★        | ★          |

### リクエストの送受信の種類

| Pattern  | Description                                                  |
| -------- | ------------------------------------------------------------ |
| CoR      | 連鎖に従って、いずれかが処理するまで要求を順番に渡す。       |
| Command  | 送信者と受信者の間に単方向接続を確立。                       |
| Mediator | 送受信者間をメディエータオブジェクトを介し 、間接的に通信    |
| Observer | 受信側に動的に要求の受信を購読させたり、購読の取り消しを許可 |

### Chain of Responsibility

- 使い道
  - 特定の順序で複数のハンドラを実行することが重要な場合。
- 説明
  - 複数のハンドラを 1 つのチェーンにリンクし、リクエストを受信したときに各ハンドラが処理可能かどうかを「尋ねる」ことができる。チェーン内のハンドラを任意の順序でリンクできる。

### Command

- 使い道
  - オブジェクトを操作でパラメータ化する場合。操作をキューに入れたり、実行をスケジュールしたり、リモートで実行したりする場合。リバーシブル操作を実装する場合。
- 説明
  - 特定のメソッド呼び出しをスタンドアロンオブジェクトに変えることができる。

### Iterator

- 使い道
  - コレクションの内部に複雑なデータ構造があるが、その複雑さをクライアントから隠したい場合。
- 説明
  - 複雑なデータ構造を扱う詳細をカプセル化し、クライアントに対してコレクション要素にアクセスする簡単な方法をいくつか提供する。

### Mediator

### Memento

### Observer

- 使い道
  - アプリ内の一部のオブジェクトが他のオブジェクトを監視する必要がある場合。
- 説明
  - Subscriber インタフェースを実装する任意のオブジェクトが、Publisher オブジェクト内のイベント通知を登録することができる。

### Visitor

- 使い道
  - Doble Dispatch
- 説明

### Strategy

- 使い道
  - いくつかの振る舞いを実行する方法が異なるだけの、似たようなクラスがたくさんある場合。
- 説明
  - さまざまな動作を別々のクラス階層に抽出し、元のクラスを 1 つにまとめて重複コードを減らすことができる。

### State

### Template Method
